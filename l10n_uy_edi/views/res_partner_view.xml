<?xml version="1.0" encoding="UTF-8"?>
<odoo>

    <record id="view_partner_form" model="ir.ui.view">
        <field name="name">partner_documents.view_partner_form</field>
        <field name="inherit_id" ref="l10n_latam_base.view_partner_latam_form"/>
        <field name="model">res.partner</field>
        <field type="xml" name="arch">
            <xpath expr="//field[@name='vat'][hasclass('oe_inline')]" position="after">
                <button name="action_l10n_uy_is_electronic_issuer" string="(UY) Is Electronic Issuer?" class="oe_link oe_inline" type="object" attrs="{'invisible': ('l10n_latam_identification_type_id.l10n_uy_dgi_code', '!=', 'False')}"/>
                <button name="%(action_partner_update)d" string="(UY) Update From DGI" class="oe_link oe_inline" type="action" attrs="{'invisible': ['|', ('l10n_latam_identification_type_id', '!=',  %(l10n_uy_account.it_rut)d), ('vat', '=', False)]}"/>
            </xpath>

            <!-- TODO move this logic to latam module, we should set this from the onchange or with an extra field company_domain -->
            <field name="l10n_latam_identification_type_id" position="attributes">
                <attribute name="domain"/>
            </field>
        </field>
    </record>


    <!-- TODO Not suse if this going to the last commit. By the moment this let us to filter easier the kind of partner we are looking for Uruguay. Maybe it is usefull we can move it to latam module -->
    <record id="view_res_partner_filter" model="ir.ui.view">
        <field name="name">base.view_res_partner_filter</field>
        <field name="inherit_id" ref="base.view_res_partner_filter"/>
        <field name="model">res.partner</field>
        <field type="xml" name="arch">
            <search>
                <field name="l10n_latam_identification_type_id"/>
            </search>
        </field>
    </record>

</odoo>
