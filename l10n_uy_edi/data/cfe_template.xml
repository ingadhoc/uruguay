<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <template id="cfe_template">
           <CFE xmlns="http://cfe.dgi.gub.uy" version="1.0">
           <!-- TODO eTck debe ser modificado depende del tipo de documento   -->
            <eTck>
                <Encabezado>
                    <IdDoc>
                        <TipoCFE t-esc="int(move.journal_document_type_id.document_type_id.code)"/>
                        <FchEmis t-esc="FchEmis"/>
                        <MntBruto>1</MntBruto>
                        <FmaPago>1</FmaPago>
                    </IdDoc>
                    <Emisor>
                        <RUCEmisor t-esc="int(move.company_id.main_id_number)"/>
                        <RznSoc t-esc="move.company_id.name"/>
                        <NomComercial t-esc="move.company_id.short_name or move.company_id.name"/>
                        <!-- <EmiSucursal>Central</EmiSucursal> es opcional para todos asi que mejor no lo pasamos -->
                        <CdgDGISucur t-esc="move.company_id.l10n_uy_dgi_house_code"/>
                        <!-- A48 -->
                        <DomFiscal t-esc="(move.company_id.street + (' ' + move.company_id.street or ''))[:70]"/>
                        <Ciudad t-esc="move.company_id.city"/>
                        <Departamento t-esc="move.company_id.state_id.name"/>
                    </Emisor>
                    <Receptor t-if="receptor">
                        <TipoDocRecep t-esc="receptor['TipoDocRecep']"/>
                        <CodPaisRecep t-esc="receptor['CodPaisRecep']"/>
                        <DocRecep t-if="receptor.get('DocRecep')" t-esc="receptor['DocRecep']"/>
                        <DocRecepExt t-if="receptor.get('DocRecepExt')" t-esc="receptor['DocRecepExt']"/>
                    </Receptor>
                    <Totales>
                        <TpoMoneda t-esc="totals_detail['TpoMoneda']"/>
                        <MntNetoIVATasaBasica t-esc="totals_detail['MntNetoIVATasaBasica']"/>
                        <IVATasaMin t-esc="totals_detail['IVATasaMin']"/>
                        <IVATasaBasica t-esc="totals_detail['IVATasaBasica']"/>
                        <MntIVATasaBasica t-esc="totals_detail['MntIVATasaBasica']"/>
                        <MntTotal t-esc="totals_detail['MntTotal']"/>
                        <CantLinDet t-esc="totals_detail['CantLinDet']"/>
                        <MntPagar t-esc="totals_detail['MntPagar']"/>
                    </Totales>
                </Encabezado>
                <Detalle>
                    <t t-foreach="item_detail" t-as="item_line">
                        <Item>
                            <NroLinDet t-esc="item_line['NroLinDet']"/>
                            <IndFact t-esc="item_line['IndFact']"/>
                            <NomItem t-esc="item_line['NomItem']"/>
                            <Cantidad t-esc="item_line['Cantidad']"/>
                            <UniMed t-esc="item_line['UniMed']"/>
                            <PrecioUnitario t-esc="item_line['PrecioUnitario']"/>
                            <MontoItem t-esc="item_line['MontoItem']"/>
                        </Item>
                    </t>
                </Detalle>
            </eTck>
            </CFE>
        </template>
    </data>
</odoo>
